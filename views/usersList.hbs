<html lang='en'>

<head>
    <meta charset='UTF-8' />
    <meta name='viewport' content='width=device-width, initial-scale=1.0' />
    <link rel='stylesheet' href='https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css' />
    <title>Saved Notes</title>
    <style>
        .cursor-not-allowed {
            cursor: not-allowed !important;
        }
    </style>
</head>

<body>
    <nav class='navbar navbar-expand-lg bg-body-tertiary'>
        <div class='container-fluid'>
            <a class='navbar-brand' href='#'>TextMate</a>
            {{#if user.filename}}
            <img src='/users/image' alt='{{user.filename}}' height='30' width='30' />
            {{else}}
            <img src='/blank-profile-picture-973460_1280.png' alt='No picture' height='30' width='30' />
            {{/if}}
            <button class='navbar-toggler' type='button' data-bs-toggle='collapse'
                data-bs-target='#navbarSupportedContent' aria-controls='navbarSupportedContent' aria-expanded='false'
                aria-label='Toggle navigation'>
                <span class='navbar-toggler-icon'></span>
            </button>
            <div class='collapse navbar-collapse' id='navbarSupportedContent'>
                <a class='text-decoration-none text-primary mx-3 ' href='/notes/create'>Create Notes</a>
                <a class='text-decoration-none text-primary mx-3 ' href='/notes'>Saved Notes</a>
                </ul>
            </div>
        </div>
    </nav>

    <div class="container">
        <table class='table table-bordered  table-striped'>
            <thead>
                <tr>

                    <th scope='col'>UserId</th>
                    <th scope='col'>Username</th>
                    <th scope="col">Email</th>

                    <th></th>
                </tr>
            </thead>
            <tbody>
                {{#each filteredUsers}}
                <tr>

                    <td>
                        {{this.id}}
                    </td>
                    <td>
                        {{this.username}}
                    </td>
                    <td>
                        {{#if this.email }}
                        {{this.email}}
                        {{else}}
                        Email Not Provided
                        {{/if}}
                    </td>
                    <td>
                        {{#if this.email}}
                        <form action="/notes/{{../note.id}}/share" method="post">
                            <input type="number" class="d-none" value="{{this.id}}" name="shared_with">
                            <button type="submit" class="btn btn-primary">Share</button>
                        </form>
                        {{/if}}
                    </td>


                </tr>
                {{/each}}
            </tbody>

    </div>
</body>

</html>